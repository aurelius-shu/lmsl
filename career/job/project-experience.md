1. 数据采集

   1. OSS 日志采集通道 - 数据流向：ERP App -> OBS/S3/JDCloud -> Kafka -> flume -> HDFS
   2. Janitor (Python) - 一种百万级跨平台异构数据迁移代理服务（已申请专利）

2. 数据分析（ETL：Hive、Azkaban、DataX；应用端: .Net Core + MySQL/SqlServer + Redis + Vue）

   1. 客户画像、用户画像
   2. 用户行为分析
   3. 产品质量分析
   4. 新特性分析
   5. 客户成功

3. 云服务平台 (Spring Boot + MySQL + Redis + Vue)

   1. 云资讯 - 主要功能精准推送 (基于数据分析+标签系统)
   2. 云评价 - 主要功能全方位收集用户评价信息
   3. 云管理中心 - 主要功能是，通过在线 Web 管理界面，实现 ERP 系统、Janitor 代理服务、其他异构系统等的远程配置管理（在线服务管理）

4. 标签系统 (Python) - 基于数据分析，对任意对象实现自定义规则的标签，并自动化生成标签，提供发布、订阅、调用标签的功能

5. ERP 产品（金蝶云星空）

   1. 管理中心 - 用来管理业务站点、业务账套、License 等
   2. 健康中心 - 集群软硬件参数监控与展示（后以 Zabbix 替代）
   3. 数据结转 - 备份并清理 ERP 业务账套中的过期数据
   4. 集成平台 - 同步异构 ERP 系统的业务数据，促成客户更换本 ERP 系统
   5. 报表 - ERP 相关报表

6. 数仓治理

   1. 根据数据来源、数据所处业务阶段、数据纬度共性、数据应用场景等，通过 Hive 库表，将 HDFS 的所有数据分层，搭建严密逻辑体系；
   2. 通过 Azkaban 实现数据处理流任务调度;
   3. 通过 DataX 打通数仓与各应用端的同步通道，将应用数据导入各应用系统
   4. 数据字典

7. 以现状下各类不便为引

8. 星空公有云 -> 苍穹数据平台

   1. 对象存储 -> Kafka -> Flume -> HDFS：数据进入 Kafka 集群后存在丢失风险，不可控；

9. 苍穹数据平台

   1. 存储资源不足已支撑智能数据服务以外的数据。经沟通确认苍穹不会扩展集群，星空存储在苍穹集群的数据被迫一删再删，已不足以支撑业务需求，星空新增数据接入受到严重限制。
   2. 运算资源不足以支撑智能数据服务以外的任务，星空数据运算资源需自行申报，且申报机器被限制在苍穹环境下，存在预算纠纷，运维管理员已关闭申报通道（且申报租赁的机器只可应用于集群计算，星空无连接和管理权限）。
   3. DataOne 已停止迭代计划，经沟通得知无集成数栖中台计划，星空无法在华为云集群使用数栖平台；
   4. 星空数据在苍穹集群的传输、存储、计算问题无法自行分析解决，只能依赖苍穹同事，苍穹同事解决星空问题优先级偏低；
   5. 星空数据在苍穹集群长期处于完整性无法保障状态、数据无监控或追溯手段、备份无还原手段等；
   6. 完全依托于苍穹 Hadoop 集群（智能数据服务部），星空无法干涉和扩展其他服务；难以将星空业务同事引入苍穹集群开发；

10. 苍穹数据平台 -> 星空数据应用

    1. 内外传输

11. 提出两个解决方案

    1. 以星空机器扩展现华为云 Hadoop 集群，星空的节点继续由苍穹智能数据服务部统一托管，只是星空节点机器由星空与苍穹共同维护；
    2. 在星空部署一套独立的 Hadoop 集群，继续使用 DataOne 作为集群上层管理系统

现状

在线管理：
DataOne

任务调度：
AzKABAN

运算层：
Hive、Spark SQL
MR(Hadoop)、Spark Core
其他： Tez、Presto

资源调度：
YARN(Hadoop)

存储层：
HDFS(Hadoop)、SQL Server、MySQL

数据集成：
DataX、Kafka、Flume
